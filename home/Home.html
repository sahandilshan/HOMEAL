<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Home</title>
    <link rel="icon" href="../assets/logos/Title.png"
          type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css"/>
    <script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
    <script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    <link rel="stylesheet" href="../css/custom.css"/>

    <style>
        .side-drawer-logo {
            margin-right: auto;
            margin-left: auto;
            margin-bottom: 50px;
            display: block;
            width: 60%;
        }
    </style>
</head>
<body>
<div data-role="page">
    <div class="top pb-2 fixed-top">
        <img alt="home" src="../assets/otherImages/18717-min.jpg" class="banner"/>
        <div class="centered-top-home">
            <div data-role="header" class="mb-1 header m-0 pt-4">
                <h1>
                    <img src="../assets/logos/MainDark.png" class="img-fluid mt-1" alt="Logo.png">
                    <div class="w-100 pt-1" style="color: white;font-size: 14px;text-shadow:none !important;">
                        Relish your taste buds with home-made
                    </div>
                </h1>
                <!--<button class="ui-btn-right ui-btn ui-btn-icon-notext ui-icon-notification">Notification</button>-->
            </div>
        </div>
        <div class="centered-home row justify-content-center mt-2">
            <div class="col-sm-12">
                <a href="#popupBasicLocation" data-rel="popup" data-transition="pop"
                   class="ui-btn ui-shadow ui-corner-all ui-btn-icon-left ui-icon-location custom-search-bar">Select
                    Your
                    Location</a>
            </div>
        </div>

        <!--Location Modal-->
        <div data-role="popup" id="popupBasicLocation" class="custom-location" data-position-to="window"
             data-overlay-theme="a" data-transition="pop" data-history="false">
            <div class="row mb-2">
                <div class="col-8">
                </div>
                <div class="col-4 custom-close-button">
                    <a href="#" data-rel="back" data-role="button" data-transition="pop"
                       class="ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all m-0">No text</a>
                </div>
            </div>
            <form>
                <div class="ui-input-search ui-body-inherit ui-corner-all ui-shadow-inset ui-input-has-clear">
                    <input data-type="search" data-enhanced="true" data-inset="false" id="pre-rendered-example-input"
                           placeholder="Search by locations..." value="">
                </div>
                <div data-role="controlgroup" data-enhanced="true" data-filter="true" data-filter-reveal="true"
                     data-input="#pre-rendered-example-input"
                     class="ui-controlgroup ui-controlgroup-vertical ui-corner-all">
                    <div class="ui-controlgroup-controls">
                        <a href="#"
                           class="ui-btn ui-corner-all ui-shadow ui-shadow ui-screen-hidden ui-btn-icon-left
                           ui-icon-location location" data-filtertext = "Colombo 10">Colombo
                            10</a>
                        <a href="#"
                           class="ui-btn ui-corner-all ui-shadow ui-first-child ui-shadow ui-last-child ui-btn-icon-left
                            ui-icon-location location" data-filtertext = "Colombo 11">Colombo
                            11</a>
                        <a href="#"
                           class="ui-btn ui-corner-all ui-shadow ui-shadow ui-screen-hidden ui-btn-icon-left
                           ui-icon-location location" data-filtertext = "Maradhana">Maradana</a>
                    </div>
                </div>
            </form>
        </div>

    </div>

    <div class="main"> <!--content area starts from here-->
        <div class="mt-n4 w-100">
            <div class="w-100">
                <div id="product-category" class="scrollmenu-category">

                </div>
            </div>
        </div>
        <div class="ml-2 mr-2 mt-2">
            <div class="row-12  mainTitle">
                All Restaurants
            </div>
            <div class="row " data-role="collapsible-set" data-filter="true" data-inset="true"
                 id="collapsiblesetForFilter" data-input="#searchForCollapsibleSet">
                <!--merchants cards will be appeared here.-->
            </div>
        </div>

        <!--Cart Modal & Delivery Modal-->
        <div id="cartModal"></div>

        <!--sig-in confirmation modal-->
        <div data-role="popup" id="signin-required-modal" style=" width: 300px !important;" data-position-to="window"
             data-overlay-theme="a"
             data-transition="pop">
            <div class="row mt-3">
                <div class="col-8">
                </div>
                <div class="col-4 custom-close-button" style="padding-right: 25px;">
                    <a href="#" data-rel="back" data-role="button" data-transition="pop"
                       class="ui-btn ui-icon-delete ui-btn-icon-notext ui-corner-all m-0">No text</a>
                </div>
            </div>
            <div style="text-align: -webkit-center;">

            </div>

            <div class="container">
                <div class="row mb-2" style="">
                    <div class="col-12 text-center" style="font-size: 14px; font-weight: bold;">
                        You need to login to buy something!
                        Please click proceed to login.
                    </div>
                    <div class="col-12 mb-3">
                        <div class="row col-12 m-0 p-0 mt-3">
                            <div class="col-6 m-0 p-0">
                                <button class="border  rounded-pill mr-1 text-white" id="btnCancel" style="background-color:#282F33;color: white; text-decoration: none; font-size:14px;font-weight: normal">Cancel</button>

                            </div>
                            <div class="col-6 m-0 p-0">
                                <button class="border rounded-pill ml-1 text-white" style="background-color:#EC7A23;color: white; font-size:14px;text-decoration: none; font-weight: normal"
                                                                                onclick='window.location.href="../welcome_screens/SignIn.html"'>Proceed</button>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>


    <!--Footer-->
    <div class="footer">
        <div class="row justify-content-between">
            <div class="col d-flex justify-content-left ml-3 p-3">
                <img src="../assets/logos/AltDark.png" class="img-fluid" alt="logo">
            </div>
            <div class="col mr-3 p-3">
                <div class="row">
                    <div class="col font1">Privacy Policy Terms of Use</div>
                    <div class="w-100"></div>
                    <div class="col font2">© 2020 HOMEAL. All rights reserved</div>
                </div>
            </div>
        </div>
    </div>

    <div data-role="footer" class="fixed-bottom">
        <nav data-role="navbar">
            <ul>
                <li><a id="nav_bar_home" class="ui-btn ui-icon-home ui-btn-icon-top ui-btn-active ui-state-persist">Home</a></li>
                <li><a id="nav_bar_orders" class="ui-btn ui-icon-orders ui-btn-icon-top">Orders</a></li>
                <li><a id="nav_bar_cart" class="ui-btn ui-icon-cart ui-btn-icon-top">Cart</a></li>
                <li><a id="nav_bar_profile"  class="ui-btn ui-icon-profile ui-btn-icon-top">Profile</a></li>
            </ul>
        </nav>
    </div>
    <div data-role="panel" data-position="right" data-display="overlay" data-theme="a" id="side-drawer"
         style="z-index: 1400">
                
        <div><img src="../assets/logos/MainLight.png" class="side-drawer-logo"></div>
        <ul data-role="listview">
            <li data-icon="false"><a onclick='window.location.href="../profile/MyAccount.html"' class="side-drawer-option">My Account</a></li>
            <li data-icon="false"><a  onclick='window.location.href="../profile/Help-about.html"' class="side-drawer-option">Help/About</a></li>
            <li data-icon="false"><a  onclick='window.location.href="../profile/Favorites.html"' class="side-drawer-option"> Favorites</a></li>
            <li data-icon="false"><a  onclick='window.location.href="../profile/Acheivements.html"' class="side-drawer-option">Acheivements</a></li>
            <li data-icon="false"><a id="profile_logout" class="side-drawer-option">Logout</a></li>
        </ul>
            
    </div><!-- /panel -->
</div>
</body>
<script src="../js/common.js"></script>
<script>
    $.support.cors = true
    let productCategoryImgs = {
        'pizza' : '../assets/categoryImages/pizza.jpg' ,
        'bakery' : '../assets/categoryImages/bakery.jpg',
        'chinese' : '../assets/categoryImages/chinese.jpg',
        'asian' : '../assets/categoryImages/Asian.jpg',
        'salads' : '../assets/categoryImages/salads.jpg'
    };
    $(document).ready(function () {
            let merchants = "";
            let productCategory = new Set();
            let merchantJsonArr = JSON.parse(sessionStorage.getItem('merchants'));
            $.each(merchantJsonArr, function (i, merchant) {
                merchants += `<div class="col-12 col-sm-6 col-md-4 pr-3 pl-3" data-filtertext="${merchant.filter_text}">
                            <div class="card">
                                <div class="card-image">
                                    <img alt="home" src="${merchant.merchant_background_img_path}" style="width: 100%;"/>
                                </div>
                                <div class="ui-grid-a">
                                    <span class="card-title">${merchant.merchant_name}</span>
                                    <span class="row card-rating">  <img alt="home"
                                                                         src="../assets/icons/star_orange_18dp.png"
                                                                         class="custom-star"/>50+ Rating</span>

                                </div>
                            </div>
                        </div>`;
                productCategory.add(merchant['merchant_category']);
            });
            $("#collapsiblesetForFilter").append(merchants);
            let categoryList = '';
            productCategory.add('Asian').add('Salads').add('Chinese');
            productCategory = Array.from(productCategory);
            $.each(productCategory, function (i, category) {
                console.log(category)
                categoryList += `
                <a href="#" class="merchantCategory" style=" text-align: -webkit-center;">
                        <div class="row-12 categoryContainer" style=" text-align: -webkit-center;">
                            <img alt="home" src="${productCategoryImgs[category.toLowerCase()]}" class="categoryImage"/>
                        </div>
                        <div class="row-12 mt-2" style="  text-align: -webkit-center;">${category}</div>
                    </a>
                `;
            });
            $("#product-category").append(categoryList);
        });
    let locationModal = $('#popupBasicLocation');
    $(document).on('click', '.merchantCategory', function () {
        locationModal.popup('open');
    });
    $(document).on('click', '.card', function () {
        locationModal.popup('open');
    });

    $('#btnCancel').click(function () {
        $('#signin-required-modal').popup('close');
    });

</script>
<script src="../js/location.js"></script>

</html>
